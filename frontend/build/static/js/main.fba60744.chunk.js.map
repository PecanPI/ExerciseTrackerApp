{"version":3,"sources":["shared/context/auth-context.js","shared/components/UIElements/LoadingSpinner.js","shared/components/UIElements/Backdrop.js","shared/hooks/auth-hook.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","userId","token","login","logout","LoadingSpinner","props","className","asOverlay","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","logoutTimer","useAuth","useState","setToken","setUserId","tokenExperationDate","setTokenExprationDate","useCallback","uid","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","useEffect","remainingtime","setTimeout","clearTimeout","storedData","parse","getItem","MainHeader","children","NavLinks","auth","useContext","to","exact","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mountOnEnter","unmountOnExit","ReactDom","MainNavigation","drawerIsOpen","setDrawerIsOpen","closeDrawerHandler","LandingPage","React","lazy","SignUp","Login","NewExercise","UserExercises","UpdateExercise","App","routes","path","component","Provider","value","fallback","render","StrictMode"],"mappings":"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","file":"static/js/main.fba60744.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nexport const AuthContext = createContext({\r\n  isLoggedIn: false,\r\n  userId: null,\r\n  token: null,\r\n  login: () => {},\r\n  logout: () => {},\r\n});","import React from 'react';\r\n\r\nimport './LoadingSpinner.css';\r\n\r\nconst LoadingSpinner = props => {\r\n  return (\r\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\r\n      <div className=\"lds-dual-ring\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './Backdrop.css';\r\n\r\nconst Backdrop = props => {\r\n  return ReactDOM.createPortal(\r\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\r\n    document.getElementById('backdrop-hook')\r\n  );\r\n};\r\n\r\nexport default Backdrop;","import {useState, useCallback, useEffect} from 'react'\r\n\r\nlet logoutTimer;\r\n\r\nfunction useAuth(){\r\n    const [token, setToken] = useState();\r\n    const [userId, setUserId] = useState();\r\n    const [tokenExperationDate, setTokenExprationDate] = useState();\r\n  \r\n    const login = useCallback((uid, token, expirationDate) => {\r\n      setUserId(uid);\r\n      setToken(token);\r\n      const tokenExperationDate =\r\n        expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60); //ms * s * h === 1hr\r\n      setTokenExprationDate(tokenExperationDate)\r\n      localStorage.setItem(\r\n        \"userData\",\r\n        JSON.stringify({\r\n          userId: uid,\r\n          token: token,\r\n          expiration: tokenExperationDate.toISOString(),\r\n        })\r\n      );\r\n    }, []);\r\n    const logout = useCallback(() => {\r\n      setToken(null);\r\n      setUserId(null);\r\n      setTokenExprationDate(null);\r\n      localStorage.removeItem(\"userData\");\r\n    }, []);\r\n  \r\n  useEffect(()=>{\r\n    if(token && tokenExperationDate){\r\n      const remainingtime = tokenExperationDate.getTime() - new Date().getTime()\r\n      logoutTimer = setTimeout(logout, remainingtime)\r\n    } else {\r\n      clearTimeout(logoutTimer)\r\n    }\r\n  },[token, logout, tokenExperationDate])\r\n  \r\n    useEffect(() => {\r\n      const storedData = JSON.parse(localStorage.getItem(\"userData\"));\r\n      if (\r\n        storedData &&\r\n        storedData.token &&\r\n        new Date(storedData.expiration) > new Date()\r\n      ) {\r\n        login(\r\n          storedData.userId,\r\n          storedData.token,\r\n          new Date(storedData.expiration)\r\n        );\r\n      }\r\n    }, [login]);\r\n\r\n    return {token, login, logout, userId}\r\n}\r\n\r\n\r\nexport default useAuth","import React from 'react'\r\n\r\nimport './MainHeader.css'\r\n\r\nfunction MainHeader(props) {\r\n    return (\r\n        <div>\r\n            <header className='main-header'>\r\n                {props.children}\r\n            </header>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default MainHeader","import React, { useContext } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport \"./NavLinks.css\";\r\nimport { AuthContext } from \"../../context/auth-context\";\r\nfunction NavLinks(props) {\r\n  const auth = useContext(AuthContext);\r\n  \r\n  return (\r\n    <div>\r\n      <ul className=\"nav-links\">\r\n        {auth.isLoggedIn && (\r\n          <li>\r\n            <NavLink to={`/exercises/${auth.userId}`} exact>\r\n              {\" \"}\r\n              My Exercises\r\n            </NavLink>\r\n          </li>\r\n        )}\r\n        {auth.isLoggedIn && (\r\n          <li>\r\n            <NavLink to=\"/exercises/create\" exact>\r\n              {\" \"}\r\n              Create Exercise\r\n            </NavLink>\r\n          </li>\r\n        )}\r\n        {/* {auth.isLoggedIn && (\r\n          <li>\r\n            <NavLink to={`/${auth.userId}/places`}> My Exercises</NavLink>\r\n          </li>\r\n        )} */}\r\n        {/* {auth.isLoggedIn && (\r\n          <li>\r\n            <NavLink to=\"/places/new\"> ADD PLACE</NavLink>\r\n          </li>\r\n        )} */}\r\n        {!auth.isLoggedIn && (\r\n          <li>\r\n            <NavLink to=\"/users/login\">Login</NavLink>\r\n          </li>\r\n        )}\r\n        {!auth.isLoggedIn && (\r\n          <li>\r\n            <NavLink to=\"/users/signup\">Sign Up</NavLink>\r\n          </li>\r\n        )}\r\n        {auth.isLoggedIn && (\r\n          <li>\r\n            <button onClick={auth.logout}> Logout </button>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NavLinks;\r\n","import React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nimport \"./SideDrawer.css\";\r\n\r\nfunction SideDrawer(props) {\r\n  const content = (\r\n    <div>\r\n      <CSSTransition\r\n        in={props.show}\r\n        timeout={200}\r\n        classNames=\"slide-in-left\"\r\n        mountOnEnter\r\n        unmountOnExit\r\n      >\r\n        <aside className=\"side-drawer\" onClick={props.onClick}>{props.children}</aside>\r\n      </CSSTransition>\r\n    </div>\r\n  );\r\n\r\n  return ReactDom.createPortal(content, document.getElementById(\"drawer-hook\"));\r\n}\r\n\r\nexport default SideDrawer;","  \r\nimport React, {useState} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport MainHeader from \"./MainHeader\";\r\nimport NavLinks from \"./NavLinks\";\r\nimport SideDrawer from \"./SideDrawer\";\r\nimport Backdrop from \"../UIElements/Backdrop\"\r\nimport \"./MainNavigation.css\";\r\n\r\nfunction MainNavigation(props) {\r\n\r\n  const [drawerIsOpen, setDrawerIsOpen] = useState(false);\r\n\r\n  function openDrawerHandler(){\r\n    setDrawerIsOpen(true)\r\n  }\r\n  function closeDrawerHandler(){\r\n    setDrawerIsOpen(false)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {drawerIsOpen && <Backdrop onClick={closeDrawerHandler} />}\r\n      <SideDrawer show={drawerIsOpen} onClick={closeDrawerHandler}>\r\n        <nav className=\"main-navigation__drawer-nav\">\r\n          <NavLinks />\r\n        </nav>\r\n      </SideDrawer> \r\n      <MainHeader>\r\n        <button className=\"main-navigation__menu-btn\" onClick={openDrawerHandler}>\r\n          <span></span>\r\n          <span></span>\r\n          <span></span>\r\n        </button>\r\n        <h1 className=\"main-navigation__title center\">\r\n          <Link to=\"/\">ExerApp</Link>\r\n        </h1>\r\n        <nav className=\"main-navigation__header-nav\">\r\n          <NavLinks />\r\n        </nav>\r\n      </MainHeader>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainNavigation;","import React, { Suspense } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n} from \"react-router-dom\";\n\nimport { AuthContext } from \"./shared/context/auth-context\";\nimport useAuth from \"./shared/hooks/auth-hook\";\n\nimport MainNavigation from \"./shared/components/Navigation/MainNavigation\";\nimport LoadingSpinner from \"./shared/components/UIElements/LoadingSpinner\";\n\nimport \"./App.css\";\n\n\nconst LandingPage = React.lazy(()=> import (\"./LandingPage/LandingPage\"));\nconst SignUp = React.lazy(()=> import (\"./user/pages/SignUp\"))\nconst Login = React.lazy(()=> import (\"./user/pages/Login\"))\nconst NewExercise = React.lazy(()=> import (\"./exercises/pages/NewExercise\"))\nconst UserExercises= React.lazy(()=> import (\"./exercises/pages/UserExercises\"))\nconst UpdateExercise = React.lazy(()=> import (\"./exercises/pages/UpdateExercise\"))\n\n\n\nfunction App() {\n  const { token, login, logout, userId } = useAuth();\n  let routes;\n\n  if (token) {\n    routes = (\n      <Switch>\n        <Route path=\"/exercises/create\" exact>\n          <NewExercise />\n        </Route>\n        <Route path=\"/exercises/update/:eId\" exact>\n          <UpdateExercise />\n        </Route>\n        <Route path=\"/exercises/:userId\">\n          <UserExercises />\n        </Route>\n\n        {/* 404 page Route */}\n        <Route component={UserExercises} />\n      </Switch>\n    );\n  } else {\n    routes = (\n      <Switch>\n        <Route path=\"/\" exact>\n          <LandingPage />\n        </Route>\n        <Route path=\"/users/signup\" exact>\n          <SignUp />\n        </Route>\n        <Route path=\"/users/login\" exact>\n          <Login />\n        </Route>\n        <Route component={LandingPage} />\n      </Switch>\n    );\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isLoggedIn: !!token,\n        token: token,\n        userId: userId,\n        login: login,\n        logout: logout,\n      }}\n    >\n      <Router>\n        <div className=\"container d-flex flex-column min-vh-100\">\n          <div className=\"wrapper flex-grow-1\">\n            <MainNavigation />\n            <Switch>\n              <Suspense\n                fallback={\n                  <div className=\"center\">\n                    <LoadingSpinner></LoadingSpinner>\n                  </div>\n                }\n              >\n                {routes}\n              </Suspense>\n            </Switch>\n          </div>\n        </div>\n      </Router>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}