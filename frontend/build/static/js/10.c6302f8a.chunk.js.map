{"version":3,"sources":["user/pages/Login.js"],"names":["Auth","auth","useContext","AuthContext","useHttpClient","isLoading","error","sendRequest","clearError","history","useHistory","useForm","email","value","isValid","password","formState","inputHandler","event","a","preventDefault","console","log","process","JSON","stringify","inputs","responseData","login","userId","token","push","onClear","className","asOverlay","id","element","type","label","validators","VALIDATOR_EMAIL","errorText","onInput","VALIDATOR_MINLENGTH","disabled","onClick"],"mappings":"4QAoGeA,UAlFf,WACE,IAAMC,EAAOC,qBAAWC,KADV,EAEwCC,cAA9CC,EAFM,EAENA,UAAWC,EAFL,EAEKA,MAAOC,EAFZ,EAEYA,YAAaC,EAFzB,EAEyBA,WACjCC,EAAUC,cAHF,EAKoBC,YAChC,CACEC,MAAO,CACLC,MAAO,GACPC,SAAS,GAEXC,SAAU,CACRF,MAAO,GACPC,SAAS,KAGb,GAhBY,mBAKPE,EALO,KAKIC,EALJ,iDAoBd,WAA6BC,GAA7B,eAAAC,EAAA,6DACED,EAAME,iBADR,SAGIC,QAAQC,IAAIC,iCAHhB,SAI+BhB,EAAY,GAAD,OACjCgB,gCADiC,gBAEpC,OACAC,KAAKC,UAAU,CACbb,MAAOI,EAAUU,OAAOd,MAAMC,MAC9BE,SAAUC,EAAUU,OAAOX,SAASF,QAEtC,CACE,eAAgB,qBAZxB,OAIUc,EAJV,OAeI1B,EAAK2B,MAAMD,EAAaE,OAAQF,EAAaG,OAC7CrB,EAAQsB,KAAR,qBAA2BJ,EAAaE,SAhB5C,kDAkBIR,QAAQC,IAAR,MAlBJ,2DApBc,sBA0Cd,OACE,gCACE,cAAC,IAAD,CAAYhB,MAAOA,EAAO0B,QAASxB,IACnC,eAAC,IAAD,CAAMyB,UAAU,wBAAhB,UACG5B,GAAa,cAAC,IAAD,CAAgB6B,WAAS,IACvC,gDACA,uBACA,iCACE,cAAC,IAAD,CACEC,GAAG,QACHC,QAAQ,QACRC,KAAK,QACLC,MAAM,SACNC,WAAY,CAACC,KACbC,UAAU,qCACVC,QAASzB,IAEX,cAAC,IAAD,CACEkB,GAAG,WACHC,QAAQ,QACRC,KAAK,WACLC,MAAM,WACNC,WAAY,CAACI,YAAoB,IACjCF,UAAU,sDACVC,QAASzB,IAGX,cAAC,IAAD,CACEoB,KAAK,SACLO,UAAW5B,EAAUF,QACrB+B,QAxEI,4CAqEN,SAKG","file":"static/js/10.c6302f8a.chunk.js","sourcesContent":["import React, { useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Input from \"../../shared/components/FormElements/Input\";\r\nimport Card from \"../../shared/components/UIElements/Card\";\r\nimport {\r\n  VALIDATOR_EMAIL,\r\n  VALIDATOR_MINLENGTH,\r\n} from \"../../shared/util/validators\";\r\nimport Button from \"../../shared/components/FormElements/Button\";\r\nimport { useForm } from \"../../shared/hooks/form-hook\";\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\n\r\nimport \"./Auth.css\";\r\n\r\nfunction Auth() {\r\n  const auth = useContext(AuthContext);\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n  const history = useHistory();\r\n\r\n  const [formState, inputHandler] = useForm(\r\n    {\r\n      email: {\r\n        value: \"\",\r\n        isValid: false,\r\n      },\r\n      password: {\r\n        value: \"\",\r\n        isValid: false,\r\n      },\r\n    },\r\n    false\r\n  );\r\n\r\n  //Login\r\n  async function submitHandler(event) {\r\n    event.preventDefault();\r\n    try {\r\n      console.log(process.env.REACT_APP_BACKENDURL);\r\n      const responseData = await sendRequest(\r\n        `${process.env.REACT_APP_BACKENDURL}/users/login`,\r\n        \"POST\",\r\n        JSON.stringify({\r\n          email: formState.inputs.email.value,\r\n          password: formState.inputs.password.value,\r\n        }),\r\n        {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      );\r\n      auth.login(responseData.userId, responseData.token); //save login information\r\n      history.push(`/exercises/${responseData.userId}`); //redirect to user page\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      <Card className=\"authentication center\">\r\n        {isLoading && <LoadingSpinner asOverlay />}\r\n        <h2>Login Required</h2>\r\n        <hr />\r\n        <form>\r\n          <Input\r\n            id=\"email\"\r\n            element=\"input\"\r\n            type=\"email\"\r\n            label=\"E-Mail\"\r\n            validators={[VALIDATOR_EMAIL]}\r\n            errorText=\"Please enter a valid email address\"\r\n            onInput={inputHandler}\r\n          />\r\n          <Input\r\n            id=\"password\"\r\n            element=\"input\"\r\n            type=\"password\"\r\n            label=\"Password\"\r\n            validators={[VALIDATOR_MINLENGTH(8)]}\r\n            errorText=\"Please enter a valid password, atleast 8 characters\"\r\n            onInput={inputHandler}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={!formState.isValid}\r\n            onClick={submitHandler}\r\n          >\r\n            {\"LOGIN\"}\r\n          </Button>\r\n        </form>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Auth;\r\n"],"sourceRoot":""}